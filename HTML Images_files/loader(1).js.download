(()=>{"use strict";const e="1.7.1";let r,o,t,i;!function(e){e.IdwHydraHasErrorKey="IDW_HYDRA_HAS_ERROR",e.IdwCohortIdsKey="cohort_ids",e.idwScrollY="idw-scroll-y",e.IdwImpressionsKey="idw-impressions",e.anonymised="Anonymised",e.isOofUrl="idw-oof",e.idwOutdated="idw-outdated",e.AnonSignalLift="anon-sl"}(r||(r={})),function(e){e.Quantcast="quantcast",e.Consentmanager="consentmanager",e.Liveramp="liveramp",e.Clickio="clickio",e.Sourcepoint="sourcepoint",e.Iubenda="iubenda",e.Uniconsent="uniconsent",e.OneTrust="onetrust",e.CookiePro="cookiepro",e.CookieBot="cookiebot",e.Googlefc="googlefc",e.Admiral="admiral",e.Ensighten="ensighten",e.CookieScript="cookiescript",e.Klaro="klaro",e.Civic="civic"}(o||(o={})),function(e){e.colorPrimary="idw_color_primary",e.errorReportingLevel="idw_error_reporting_level",e.cmpProvider="idw_cmp_provider",e.cmpProviderCookieGroup="idw_cmp_provider_cookie_group",e.environment="idw_environment",e.notIntegrateCmp="idw_not_integrate_cmp",e.overrideHasConsent="override_has_consent",e.softPrivacyRegulated="soft_privacy_regulated",e.hideButton="idw_hide_button",e.retargetingOn="retargeting_on",e.gptTargetingOn="gpt_targeting_on",e.extendLoginToSubdomains="extend_login_to_subdomains",e.clientId="idw_client_id",e.loginExceptionPages="idw_login_exception_pages",e.loginInclusionPages="idw_login_inclusion_pages",e.immediateLoginPages="idw_immediate_login_pages",e.metricsRootUrl="idw_metrics_root_url",e.metricsCollectorUrl="idw_metrics_collector_url",e.retargetingScriptUrl="idw_retargeting_script_url",e.retargetingSegmentsUrl="idw_retargeting_segments_url",e.healthCheckUrl="idw_health_check_url",e.errorReportingUrl="idw_error_reporting_url",e.authority="idw_authority"}(t||(t={})),function(e){e.colorPrimary="color-primary",e.errorReportingLevel="error-reporting-level",e.cmpProvider="cmp-provider",e.cmpProviderCookieGroup="cmp-provider-cookie-group",e.environment="environment",e.notIntegrateCmp="not-integrate-cmp",e.overrideHasConsent="override-has-consent",e.softPrivacyRegulated="soft-privacy-regulated",e.hideButton="hide-button",e.retargetingOn="retargeting-on",e.gptTargetingOn="gpt-targeting-on",e.extendLoginToSubdomains="extend-login-to-subdomains",e.clientId="client-id",e.loginExceptionPages="login-exception-pages",e.loginInclusionPages="login-inclusion-pages",e.immediateLoginPages="immediate-login-pages",e.loginInNewTab="login-in-new-tab",e.iframeLogin="iframe-login",e.loginRedirect="login-redirect",e.metricsRootUrl="metrics-root-url",e.metricsCollectorUrl="metrics-collector-url",e.retargetingScriptUrl="retargeting-script-url",e.retargetingSegmentsUrl="retargeting-segments-url",e.healthCheckUrl="health-check-url",e.errorReportingUrl="error-reporting-url",e.authority="authority",e.tagType="tag-type"}(i||(i={}));try{const o=document.currentScript;if(!o?.src)throw new Error("loader.js script source not found, cannot load Anonymised tag");const t=Array.from(o.attributes),i=o.src.split("/").pop()||"";if(!i.startsWith("loader.js")&&!i.startsWith("idw_plugin_light.min.js"))throw new Error("Unexpected loader script name");const n=o.src.replace(i,"bundle.js")+`?v=${e}`,a=o.src.replace(i,"auth.js")+`?v=${e}`,s=Array.from(document.scripts),c=s.some((e=>e.src===n)),g=s.some((e=>e.src===a||e.src.includes("static.anonm.io")&&e.src.includes("auth.js")));if(c)throw new Error("Anonymised tag already present: bundle.js, skipping re-initialization");const l=document.createElement("script");t.forEach((e=>{l.setAttribute(e.name,e.value)})),l.setAttribute("src",n),l.onerror=()=>{console.warn("Anonymised tag: Failed to load bundle.js")};const d=document.head||document.documentElement;if(d.appendChild(l),!g){const e=document.createElement("script");e.setAttribute("src",a),e.onerror=()=>{console.warn("Anonymised tag: Failed to load auth.js")},d.appendChild(e)}window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push((()=>{try{const e=JSON.parse(window.localStorage.getItem(r.AnonSignalLift))||{};e?.cuid&&window.googletag.pubads().setPublisherProvidedId(e.cuid),e?.iabAudience&&e?.iabAudience?.length&&(window.googletag.setConfig({pps:{taxonomies:{IAB_AUDIENCE_1_1:{values:e.iabAudience}}}}),console.log("Set PPS to Google Publisher Tag",e.iabAudience)),e.targeting&&Array.isArray(e.targeting)&&e.targeting.forEach((e=>{e?.key&&void 0!==e?.value&&window.googletag.pubads().setTargeting(e.key,e.value)}))}catch(e){console.warn(`${r.AnonSignalLift} set GPT params error`,e)}}))}catch(e){console.warn("Anonymised tag: Initialization error:",e)}})();